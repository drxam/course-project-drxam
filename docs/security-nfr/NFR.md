# Security Non-Functional Requirements (NFR)

## Обзор
Данный документ содержит измеримые и проверяемые требования безопасности для SecDev Course App.

## NFR Таблица

| ID | Название | Описание | Метрика/Порог | Проверка (чем/где) | Компонент | Приоритет |
|----|----------|----------|---------------|-------------------|-----------|-----------|
| NFR-001 | Время ответа API | API должен отвечать в разумное время | p95 ≤ 200ms | CI тесты, мониторинг | API endpoints | High |
| NFR-002 | Доступность сервиса | Сервис должен быть доступен | SLA ≥ 99.5% | Uptime мониторинг | Infrastructure | High |
| NFR-003 | Обработка ошибок | Ошибки должны обрабатываться корректно | Error rate ≤ 1% | Логи, метрики | Error handling | Medium |
| NFR-004 | Валидация входных данных | Все входные данные должны валидироваться | 100% валидация | Unit тесты | Input validation | High |
| NFR-005 | Безопасность паролей | Пароли должны быть защищены | Argon2id, min 12 chars | Security audit | Authentication | High |
| NFR-006 | Время жизни токенов | JWT токены должны иметь ограниченное время жизни | TTL ≤ 1 час | Token validation | Authentication | Medium |
| NFR-007 | Логирование безопасности | События безопасности должны логироваться | 100% security events | Security logs | Logging | Medium |
| NFR-008 | Защита от атак | Защита от основных типов атак | Rate limit: 100 req/min | Rate limiting | Security | High |

## Детальное описание ключевых NFR

### NFR-001: Время ответа API
**Цель:** Обеспечить быстрый отклик API для пользователей
**Метрика:** 95-й процентиль времени ответа ≤ 200ms
**Проверка:**
- CI тесты с измерением времени ответа
- Мониторинг в production
- Нагрузочное тестирование

### NFR-002: Доступность сервиса
**Цель:** Обеспечить высокую доступность сервиса
**Метрика:** SLA ≥ 99.5% uptime
**Проверка:**
- Uptime мониторинг (например, UptimeRobot)
- Health checks каждые 30 секунд
- Автоматические алерты при недоступности

### NFR-003: Обработка ошибок
**Цель:** Минимизировать количество ошибок в системе
**Метрика:** Error rate ≤ 1% от общего количества запросов
**Проверка:**
- Анализ логов ошибок
- Метрики в мониторинге
- Автоматические алерты при превышении порога

### NFR-004: Валидация входных данных
**Цель:** Предотвратить атаки через некорректные входные данные
**Метрика:** 100% валидация всех входных параметров
**Проверка:**
- Unit тесты для всех валидаторов
- Fuzzing тесты с некорректными данными
- Code review на предмет отсутствия валидации

### NFR-005: Безопасность паролей
**Цель:** Обеспечить надежное хранение паролей
**Метрика:**
- Использование Argon2id для хеширования
- Минимум 12 символов в пароле
- Соль уникальная для каждого пароля
**Проверка:**
- Security audit кода
- Тестирование с различными паролями
- Проверка алгоритма хеширования

### NFR-006: Время жизни токенов
**Цель:** Ограничить время действия токенов для безопасности
**Метрика:** TTL ≤ 1 час для JWT токенов
**Проверка:**
- Unit тесты для проверки TTL
- Интеграционные тесты с истекшими токенами
- Мониторинг использования токенов

### NFR-007: Логирование безопасности
**Цель:** Отслеживать события безопасности
**Метрика:** 100% логирование security events
**Проверка:**
- Аудит логов на предмет security events
- Тестирование логирования при различных событиях
- Мониторинг полноты логов

### NFR-008: Защита от атак
**Цель:** Предотвратить DoS и другие атаки
**Метрика:** Rate limit 100 запросов в минуту на IP
**Проверка:**
- Нагрузочное тестирование
- Тестирование с превышением лимитов
- Мониторинг подозрительной активности

## Метрики и KPI

### Производительность
- **Latency p95:** ≤ 200ms
- **Throughput:** ≥ 1000 RPS
- **Error rate:** ≤ 1%

### Безопасность
- **Security events logged:** 100%
- **Vulnerability age:** ≤ 30 дней для Critical
- **Password strength:** Argon2id, min 12 chars

### Доступность
- **Uptime SLA:** ≥ 99.5%
- **Recovery time:** ≤ 5 минут
- **Health check interval:** 30 секунд
